## 5. 데이터 처리 규칙 (Data Handling Rules)

<details>
<summary>펼쳐보기</summary>
- **Query Parameters (`params`)**:
    - `null`, `undefined`: **제외(Omit)**합니다.
    - **빈 배열(`[]`)**: **제외(Omit)**합니다.
    - **빈 문자열(`""`)**: `key=` 형태로 전송합니다.
    - **배열 내부**의 `null`, `undefined` 값도 **제외**합니다. 이때 인덱스는 밀려서 채워집니다(Compact). (예: `paramsArrayFormat: 'index'`일 때 `[1, null, 2]` -> `key[0]=1&key[1]=2`)
    - **Date 객체**: **ISO 8601** 문자열(`YYYY-MM-DDTHH:mm:ss.sssZ`)로 변환합니다. (이후 전체 쿼리 스트링은 표준 `x-www-form-urlencoded` 규칙에 따라 인코딩됩니다.)
    - **Number**: 문자열로 변환합니다. (예: `123` -> `"123"`)
    - `true`, `false`: 문자열 `"true"`, `"false"`로 변환합니다.
- **JSON Body (`data`)**:
    - `undefined`: **제외(Omit)**합니다.
    - `null`: **`null` 값 그대로 전송**합니다. (DB 필드 초기화 등의 목적)
    - **NaN, Infinity**: **`null`**로 변환합니다. (JSON 표준 준수)
    - **Circular Reference**: 순환 참조가 포함된 객체는 직렬화 시 **예외**를 발생시켜야 합니다.
    - **Large Integer (JS)**: JavaScript 환경에서 64-bit 정수(BigInt)는 `JSON.parse` 시 정밀도 손실이 발생할 수 있습니다. 이 경우 `responseType: 'text'` 사용을 권장합니다.
    - **Empty Response**: `responseType: 'json'`일 때 응답 본문이 비어있으면(Length 0), **`null`**을 반환합니다. (파싱 에러 방지)
- **Headers (`headers`)**:
    - `undefined`: **제외(Omit)**합니다. (기본 헤더가 있다면 적용됨)
    - `null`: **제거(Remove)**합니다. (기본 헤더가 있어도 전송하지 않음)
    - **배열(Array)** 값: 쉼표(`,`)로 이어 붙여 하나의 문자열로 만듭니다. (예: `['a', 'b']` -> `"a,b"`). **단, `Cookie` 헤더는 세미콜론(`; `)으로 연결합니다.**
    - **Boolean 값**: 소문자 문자열 `"true"`, `"false"`로 변환합니다. (언어별 `True`/`true` 차이 제거)
    - **Date 객체**: **HTTP Date** 형식(UTC String)으로 변환합니다. (예: `Wed, 21 Oct 2015 07:28:00 GMT`)
    - 그 외의 값: **문자열(String)**로 변환하여 전송합니다.
    - **Key 매칭**: 내부 로직에서 헤더를 확인할 때(예: `Content-Type`), **대소문자를 구분하지 않고(Case-insensitive)** 처리해야 합니다.

- **Multipart Body (`data` + `files`)**:
    - `files`가 존재하여 `multipart/form-data`로 전송되는 경우, `data` 필드의 처리 규칙:
        - **제약 사항**: `data`는 반드시 **Plain Object**여야 합니다. 다른 타입이 전달될 경우 **예외**를 발생시켜야 합니다.
        - **Key Collision**: `data`와 `files`에 동일한 키가 존재할 경우, 덮어쓰지 않고 **두 값 모두 전송(Multi-value)**됩니다.
            - **Warning**: 이 경우 일부 서버 프레임워크는 파싱 에러를 일으키거나 하나의 값만 인식할 수 있습니다.
        - `null`, `undefined`: **제외(Omit)**합니다.
        - **배열(Array)**: `paramsArrayFormat` 설정에 따라 직렬화합니다. (기본값: 동일 Key 반복)
        - **Date 객체**: **ISO 8601** 문자열로 변환하여 전송합니다.
        - **Boolean 값**: 소문자 문자열 `"true"`, `"false"`로 변환하여 전송합니다.
        - **객체(Object)**: JSON 문자열로 변환하여 전송합니다.
        - 그 외: 문자열로 변환하여 전송합니다.
</details>